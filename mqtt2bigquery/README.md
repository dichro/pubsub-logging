# mqtt2bigquery

mqtt2bigquery reads JSON-formatted syslog messages from an MQTT topic (as
generated by, for example, syslog2mqtt) and inserts them into a GCP BigQuery
table.

This needs a pre-configured table in BigQuery with the following schema:
<pre>
ReceivedTimestamp	TIMESTAMP	NULLABLE
Client	STRING	NULLABLE
ClientTimestamp	TIMESTAMP	NULLABLE
ClientHostname	STRING	NULLABLE
Tag	STRING	NULLABLE
Message	STRING	NULLABLE
Priority	INTEGER	NULLABLE
Severity	INTEGER	NULLABLE
Facility	INTEGER	NULLABLE
</pre>

...in addition to all the usual shenanigans with setting up a GCP project,
enabling billing, configuring a BigQuery dataset, and setting up a service
account with credentials that this program can use.

An effective command-line looks like:

`mqtt2bigquery --gcp_project scary-children-90210 --bq_table logs.syslog`

...if you accept defaults for listening ports and MQTT broker address.
